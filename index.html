<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listă de Prețuri</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        input { width: 100%; padding: 10px; margin-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f4f4f4; }
    </style>
</head>
<body>
    <h2>Listă de Prețuri</h2>
    <input type="text" id="search" placeholder="Caută după model..." onkeyup="searchTable()">
    <table>
        <thead>
            <tr>
                <th>Cat.Page</th>
                <th>Brand</th>
                <th>Model</th>
                <th>Title</th>
                <th>Pricesheet</th>
                <th>Sell Price (Lei)</th>
                <th>Promo Discount</th>
                <th>Discount Ends at</th>
            </tr>
        </thead>
        <tbody id="productTable">
        </tbody>
    </table>

    <script>
        document.addEventListener("DOMContentLoaded", fetchProducts);

        function fetchProducts() {
            fetch("https://username.github.io/pricelist-page/pricelist.json") // Modifică URL-ul cu linkul tău real
                .then(response => response.json())
                .then(data => {
                    let table = document.getElementById("productTable");
                    table.innerHTML = "";
                    const exchangeRate = 5.1; // Presupunem 1€ = 5 lei (schimbă cu rata corectă)
                    data.forEach(product => {
                        let priceEuro = parseFloat(product["Sell Price*(€)"]) || 0;
                        let priceLei = (priceEuro * exchangeRate).toFixed(2);
                        let row = `<tr>
                            <td>${product["Cat.Page"] || "-"}</td>
                            <td>${product.Brand || "-"}</td>
                            <td>${product.Model || "-"}</td>
                            <td>${product.Title || "-"}</td>
                            <td>${product.Pricesheet || "-"}</td>
                            <td>${priceLei} Lei</td>
                            <td>${product["Promo Discount"] || "-"}</td>
                            <td>${product["Discount Ends at"] || "-"}</td>
                        </tr>`;
                        table.innerHTML += row;
                    });
                })
                .catch(error => console.error("Eroare la încărcarea datelor: ", error));
        }

        function searchTable() {
            let input = document.getElementById("search").value.toUpperCase();
            let table = document.getElementById("productTable");
            let rows = table.getElementsByTagName("tr");
            
            for (let i = 0; i < rows.length; i++) {
                let td = rows[i].getElementsByTagName("td")[2]; // Caută în coloana Model
                if (td) {
                    let txtValue = td.textContent || td.innerText;
                    rows[i].style.display = txtValue.toUpperCase().indexOf(input) > -1 ? "" : "none";
                }
            }
        }
    </script>
</body>
</html>
